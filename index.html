<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planejamento Financeiro Pessoal</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background:#1f2a2e;
  color:#fff;
  padding:20px;
}
.container {
  max-width:420px;
  margin:auto;
}
h2 {
  text-align:center;
  margin-bottom:20px;
}
.section {
  background:#263238;
  padding:16px;
  border-radius:12px;
  margin-bottom:20px;
}
.section h3 {
  margin-top:0;
}
.label {
  font-size:14px;
  margin-bottom:4px;
}
input {
  width:100%;
  padding:10px;
  border-radius:8px;
  border:none;
  margin-bottom:12px;
  font-size:15px;
}
.result {
  font-weight:600;
  text-align:center;
  margin-top:10px;
}
.highlight {
  color:#4fc3f7;
  font-weight:700;
}
</style>
</head>

<body>
<div class="container">

<h2>üìä Planejamento Financeiro Pessoal</h2>

<!-- BLOCO 1 -->
<div class="section">
  <h3>Patrim√¥nio Atual</h3>

  <div class="label">Caixa / Conta</div>
  <input type="number" id="caixa">

  <div class="label">Renda Fixa</div>
  <input type="number" id="fixa">

  <div class="label">Renda Vari√°vel</div>
  <input type="number" id="variavel">

  <div class="label">Exterior / Outros</div>
  <input type="number" id="exterior">

  <div class="result">
    Patrim√¥nio Total:
    <span class="highlight" id="totalPatrimonio">R$ 0</span>
  </div>
</div>

<!-- BLOCO 2 -->
<div class="section">
  <h3>Fluxo Mensal</h3>

  <div class="label">Renda Mensal L√≠quida</div>
  <input type="number" id="renda">

  <div class="label">Gastos Fixos</div>
  <input type="number" id="fixos">

  <div class="label">Gastos Vari√°veis</div>
  <input type="number" id="variaveis">

  <div class="result">
    Aporte Mensal:
    <span class="highlight" id="aporte">R$ 0</span>
  </div>

  <div class="result">
    Taxa de Poupan√ßa:
    <span class="highlight" id="taxa">0%</span>
  </div>
</div>

<!-- BLOCO 3 -->
<div class="section">
  <h3>üõü Reserva de Seguran√ßa</h3>

  <div class="label">Custo de Vida Mensal</div>
  <input type="number" id="custoVida">

  <div class="label">Meses de Seguran√ßa</div>
  <input type="number" id="mesesReserva">

  <div class="label">Valor J√° Reservado</div>
  <input type="number" id="reservaAtual">

  <div class="result">
    Reserva Ideal:
    <span class="highlight" id="reservaIdeal">R$ 0</span>
  </div>

  <div class="result">
    Gap da Reserva:
    <span class="highlight" id="gapReserva">R$ 0</span>
  </div>
</div>

<!-- BLOCO 4 -->
<div class="section">
  <h3>üèñÔ∏è Aposentadoria</h3>

  <div class="label">Idade Atual</div>
  <input type="number" id="idadeAtual">

  <div class="label">Idade para Aposentar</div>
  <input type="number" id="idadeAposentar">

  <div class="label">Renda Mensal Desejada (valor de hoje)</div>
  <input type="number" id="rendaApos">

  <div class="label">Rentabilidade Anual Estimada (%)</div>
  <input type="number" id="rentabilidade">

  <div class="result">
    Patrim√¥nio Necess√°rio:
    <span class="highlight" id="patrimonioNecessario">R$ 0</span>
  </div>
</div>

</div>

<script>
const ids = [
  "caixa","fixa","variavel","exterior",
  "renda","fixos","variaveis",
  "custoVida","mesesReserva","reservaAtual",
  "idadeAtual","idadeAposentar","rendaApos","rentabilidade"
];

ids.forEach(id => {
  const el = document.getElementById(id);
  el.value = localStorage.getItem(id) || "";
  el.addEventListener("input", calcular);
});

function calcular() {
  ids.forEach(id => {
    localStorage.setItem(id, document.getElementById(id).value);
  });

  const caixa = +caixa.value || 0;
  const fixa = +fixa.value || 0;
  const variavel = +variavel.value || 0;
  const exterior = +exterior.value || 0;

  const totalPat = caixa + fixa + variavel + exterior;
  totalPatrimonio.innerText =
    totalPat.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

  const rendaVal = +renda.value || 0;
  const gastos = (+fixos.value || 0) + (+variaveis.value || 0);
  const aporte = rendaVal - gastos;

  aporteEl = aporte.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
  aporteEl && (aporte.innerText = aporteEl);

  const taxa = rendaVal > 0 ? (aporte / rendaVal) * 100 : 0;
  taxaEl = taxa.toFixed(1) + "%";
  taxaEl && (taxa.innerText = taxaEl);

  const reservaIdeal = (+custoVida.value || 0) * (+mesesReserva.value || 0);
  reservaIdealEl = reservaIdeal.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
  reservaIdealEl && (reservaIdeal.innerText = reservaIdealEl);

  const gap = reservaIdeal - (+reservaAtual.value || 0);
  gapReserva.innerText =
    gap.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

  const patrimonioNecessario = (+rendaApos.value || 0) * 12 * 25;
  patrimonioNecessarioEl =
    patrimonioNecessario.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
  patrimonioNecessarioEl &&
    (patrimonioNecessario.innerText = patrimonioNecessarioEl);
}

calcular();
</script>

</body>
</html>
